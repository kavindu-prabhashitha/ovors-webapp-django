{% extends 'ovros_dashboard/user_dashboard/user_dashboard.html' %}
{% load static %}
{% block title %}
User Dashboard Overview
{% endblock %}

{% block nav_overview_active %}
active
{% endblock %}

{% block nav_profile_section_top %}
 <div class="dropdown">
                            <a class="d-flex align-items-center"
                               href="#"
                               role="button"
                               data-bs-toggle="dropdown"
                               aria-haspopup="false"
                               aria-expanded="false">
                                <div>
                                    <div class="avatar avatar-sm bg-warning rounded-circle text-white">

                                        {% if user_profile.photo %}
                                                 <img alt="..." src="{{ user_profile.photo.url }}"/>
                                        {% else %}
                                                 <img alt="..." src="{% static 'images/defaultProfilePic.jpg' %}"/>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="d-none d-sm-block ms-3">
                                    <span class="h6">{{ user.first_name }}</span>
                                </div>
                                <div class="d-none d-md-block ms-md-2">
                                    <i class="bi bi-chevron-down text-muted text-xs"></i></div>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <div class="dropdown-header">
                      <span class="d-block text-sm text-muted mb-1">Signed in as</span>
                                    <span class="d-block text-heading font-semibold">{{ user.first_name}}</span>
                                </div>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"><i class="bi bi-house me-3"></i>Home </a>
                                <a class="dropdown-item" href="{% url 'user_profile' %}">
                                    <i class="bi bi-pencil me-3"></i>Edit profile</a>

                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                ><i class="bi bi-person me-3"></i>Login</a
                                >
                            </div>
                        </div>
{% endblock %}

{% block dashboard_content %}

    <main class="py-6 bg-surface-secondary">
          <div class="container-fluid">
            <div class="row g-6 mb-6">
              <div class="col-xl-3 col-sm-6 col-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <span
                          class="h6 font-semibold text-muted text-sm d-block mb-2"
                          ><a href="{% url 'user_bookings' %}">Bookings</a></span>
                        <span class="h3 font-bold mb-0">
                            {% if booking_count == 0 %}
                                0
                            {% else %}
                                {{ booking_count }}
                            {% endif %}
                        </span>
                      </div>
                      <div class="col-auto">
                        <div
                          class="icon icon-shape bg-tertiary text-white text-lg rounded-circle"
                        >
                          <i class="bi bi-credit-card"></i>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-sm-6 col-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <span
                          class="h6 font-semibold text-muted text-sm d-block mb-2">
                            <a href="{% url 'user_payments_view' %}">Payments</a></span
                        >
                        <span class="h3 font-bold mb-0">{{ payment_count }}</span>
                      </div>
                      <div class="col-auto">
                        <div
                          class="icon icon-shape bg-primary text-white text-lg rounded-circle"
                        >
                          <i class="bi bi-people"></i>
                        </div>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-sm-6 col-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <span
                          class="h6 font-semibold text-muted text-sm d-block mb-2"
                          >Reports</span
                        >
                        <span class="h3 font-bold mb-0">{{ payment_count }}</span>
                      </div>
                      <div class="col-auto">
                        <div
                          class="icon icon-shape bg-info text-white text-lg rounded-circle"
                        >
                          <i class="bi bi-clock-history"></i>

                        </div>


                      </div>
                        <div class="mt-2">
                              <a href="{% url 'user_generate_report' %}" class="btn btn-sm btn-secondary">Generate Report</a>
                          </div>
                    </div>

                  </div>
                </div>
              </div>

            </div>

          </div>
        </main>

{% endblock %}


{% block nav_profile_section_bottom %}
    <div class="dropup w-full">
        <button
                class="btn-primary d-flex w-full py-3 ps-3 pe-4 align-items-center shadow shadow-3-hover rounded-3"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false">

                {% if user_profile.photo %}
                        <span class="me-3"><img alt="..." src="{{user_profile.photo.url}}" class="avatar avatar-sm rounded-circle"/> </span>
                {% else %}
                        <span class="me-3"><img alt="..." src="{% static 'images/defaultProfilePic.jpg' %}" class="avatar avatar-sm rounded-circle"/> </span>
                {% endif %}
            <span class="flex-fill text-start text-sm font-semibold">{{ user.first_name}} </span>
            <span><i class="bi bi-chevron-expand text-white text-opacity-70"></i></span>
        </button>
        <div class="dropdown-menu dropdown-menu-end w-full">
            <div class="dropdown-header">
  <span class="d-block text-sm text-muted mb-1"
  >Signed in as</span
  >
                <span class="d-block text-heading font-semibold"
                >{{ user.first_name}}</span
                >
            </div>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{% url 'user_overview' %}"
            ><i class="bi bi-house me-3"></i>Home </a
            ><a class="dropdown-item" href="{% url 'user_profile' %}"
        ><i class="bi bi-pencil me-3"></i>Profile </a
        >
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{% url 'logout' %}"
            ><i class="bi bi-box-arrow-left me-3"></i>Logout</a
            >
        </div>
    </div>
    <div class="d-flex gap-3 justify-content-center align-items-center mt-6 d-none">
        <div>
            <i class="bi bi-moon-stars me-2 text-warning me-2"></i>
            <span class="text-heading text-sm font-bold">Dark mode</span>
        </div>
        <div class="ms-auto">
            <div class="form-check form-switch me-n2">
                <input
                        class="form-check-input"
                        type="checkbox"
                        id="switch-dark-mode"
                />
            </div>
        </div>
    </div>
{% endblock %}